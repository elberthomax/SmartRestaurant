<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h1>List Makanan</h1>
<div id="data"></div>

<script>

    let url_GetOrder = "http://stevelukis.com/smart-restaurant/backend/chef/get_orders";
    let url_SetInProgress = "http://stevelukis.com/smart-restaurant/backend/chef/in_progress";
    let url_SetOrderDone = "http://stevelukis.com/smart-restaurant/backend/chef/done";
    let data = {};

    makeRequest(url_GetOrder, data, function (response) {
        for(var i = 0; i < response.length; i++){
            let orderID = response[i]['id'];
            var outputOrder = '';
            outputOrder += '<div><h3>Table Number:';
            outputOrder += '<span>' + response[i]["table_number"] + '</span></h3>';
            outputOrder += '<p><span> ' + response[i]["quantity"] + '</span>';
            outputOrder += '<span> ' + response[i]["menu_name"] + '</span>';
            outputOrder += '<span> ' + response[i]["cooked_status"] + '</span>';
            outputOrder += ' <button onclick="inProgress('+ orderID + ')">In Progress</button>';
            outputOrder += ' <button onclick="orderDone('+ orderID + ')">Done</button>';
            outputOrder += '<br></div>';
            document.getElementById('data').innerHTML += outputOrder;
        }
    });

    function inProgress(id){
        let order = {
            "id" : id
        };
        makeRequest(url_SetInProgress, order, function(response){
            window.location = "chef.html";
        });
    }

    function orderDone(id){
        let order = {
            "id" : id
        };
        makeRequest(url_SetOrderDone, order, function(response){
            window.location = "chef.html";
        });
    }

    function makeRequest(url, data, callback) {
        let request = new XMLHttpRequest();

        request.open("POST", url, true);
        request.setRequestHeader("Content-Type", "application/json");
        request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
                callback(JSON.parse(request.responseText));
            }
        };
        request.send(JSON.stringify(data));
    }

</script>

</body>
</html>